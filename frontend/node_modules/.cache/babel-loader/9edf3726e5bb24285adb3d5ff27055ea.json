{"ast":null,"code":"import _classCallCheck from\"C:/Users/elvir/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/elvir/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{apiConfig}from\"./constants\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._onResponse=function(res){if(res.ok){return res.json();}return Promise.reject('Oшибка на стороне сервера');};this._url=options.url;this._headers=options.headers;}_createClass(Api,[{key:\"getAllInfo\",value:function getAllInfo(){return Promise.all([this.getUser(),this.getInitialCards()]);}},{key:\"getUser\",value:function getUser(){var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/users/me\"),{headers:{'authorization':\"Bearer \".concat(token)}}).then(this._onResponse);}},{key:\"editProfile\",value:function editProfile(data){var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/users/me\"),{method:'PATCH',headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({name:data.name,about:data.about})}).then(this._onResponse);}},{key:\"getInitialCards\",value:function getInitialCards(){var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/cards/\"),{headers:{'authorization':\"Bearer \".concat(token)}}).then(this._onResponse);}},{key:\"removeCard\",value:function removeCard(id){var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/cards/\").concat(id),{method:'DELETE',headers:{'authorization':\"Bearer \".concat(token)}}).then(this._onResponse);}},{key:\"addCard\",value:function addCard(_ref){var name=_ref.name,link=_ref.link;var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/cards\"),{method:'POST',headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({name:name,link:link})}).then(this._onResponse);}},{key:\"handleLike\",value:function handleLike(id,isLiked){var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/cards/\").concat(id,\"/likes\"),{method:isLiked?'DELETE':'PUT',headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}}).then(this._onResponse);}},{key:\"updateAvatar\",value:function updateAvatar(data){var token=localStorage.getItem('jwt');return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:'PATCH',headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({avatar:data.avatar})}).then(this._onResponse);}}]);return Api;}();var api=new Api(apiConfig);export default api;","map":{"version":3,"names":["apiConfig","Api","options","_onResponse","res","ok","json","Promise","reject","_url","url","_headers","headers","all","getUser","getInitialCards","token","localStorage","getItem","fetch","then","data","method","body","JSON","stringify","name","about","id","link","isLiked","avatar","api"],"sources":["C:/Users/elvir/dev/react-mesto-api-full/frontend/src/utils/Api.js"],"sourcesContent":["import { apiConfig } from \"./constants\";\r\nclass Api {\r\n    constructor(options) {\r\n        this._url = options.url;\r\n        this._headers = options.headers\r\n    }\r\n\r\n    _onResponse = (res) => {\r\n        if (res.ok) {\r\n            return res.json()\r\n        }\r\n        return Promise.reject('Oшибка на стороне сервера')\r\n    }\r\n\r\n    getAllInfo() {\r\n        return Promise.all([this.getUser(), this.getInitialCards()])\r\n    }\r\n\r\n    getUser() {\r\n        const token = localStorage.getItem('jwt');\r\n        return fetch(`${this._url}/users/me`, {\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n            }\r\n        })\r\n            .then(this._onResponse)\r\n    }\r\n\r\n    editProfile(data) {\r\n        const token = localStorage.getItem('jwt');\r\n\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                about: data.about\r\n            })\r\n        })\r\n            .then(this._onResponse)\r\n    }\r\n\r\n    getInitialCards() {\r\n        const token = localStorage.getItem('jwt');\r\n\r\n        return fetch(`${this._url}/cards/`, {\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n            }\r\n        })\r\n\r\n            .then(this._onResponse)\r\n    }\r\n\r\n    removeCard(id) {\r\n        const token = localStorage.getItem('jwt');\r\n\r\n        return fetch(`${this._url}/cards/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n            }\r\n        })\r\n            .then(this._onResponse)\r\n    }\r\n\r\n    addCard({ name, link }) {\r\n        const token = localStorage.getItem('jwt');\r\n\r\n        return fetch(`${this._url}/cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ name, link })\r\n        })\r\n            .then(this._onResponse)\r\n    }\r\n\r\n    handleLike(id, isLiked) {\r\n        const token = localStorage.getItem('jwt');\r\n\r\n        return fetch(`${this._url}/cards/${id}/likes`, {\r\n            method: isLiked ? 'DELETE' : 'PUT',\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then(this._onResponse)\r\n    }\r\n\r\n    updateAvatar(data) {\r\n        const token = localStorage.getItem('jwt');\r\n\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                avatar: data.avatar\r\n            })\r\n        })\r\n            .then(this._onResponse)\r\n    }\r\n}\r\n\r\nconst api = new Api(apiConfig);\r\n\r\nexport default api"],"mappings":"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"},"metadata":{},"sourceType":"module"}