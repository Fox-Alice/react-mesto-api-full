{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/elvir/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/elvir/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/elvir/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/elvir/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import PopupWithForm from'./PopupWithForm.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup.js';import ImagePopup from'./ImagePopup.js';import Login from'./Login.js';import Register from'./Register.js';import InfoTooltip from'./InfoTooltip.js';import*as auth from'../utils/Auth.js';import api from'../utils/Api';import{useEffect,useState,useCallback}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{Route,Redirect,Switch}from'react-router-dom';import ProtectedRoute from'./ProtectedRoute.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setselectedCard=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loggedIn=_useState14[0],setLoggedIn=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),userData=_useState18[0],setUserData=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),email=_useState20[0],setEmail=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isTooltipPopupOpen=_useState22[0],setIsTooltipPopupOpen=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),message=_useState24[0],setMessage=_useState24[1];var closeAllPopups=function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setselectedCard(null);setIsTooltipPopupOpen(false);};var handleCardLike=function handleCardLike(card){console.log(card.likes);var isLiked=card.likes.some(function(id){return id===currentUser._id;});api.handleLike(card===null||card===void 0?void 0:card._id,isLiked).then(function(res){setCards(function(state){return state.map(function(c){return c._id===card._id?res:c;});});}).catch(function(err){console.log('Error',err);});};var handleCardDelete=function handleCardDelete(card){var isOwn=(card===null||card===void 0?void 0:card.owner)===currentUser._id;api.removeCard(card===null||card===void 0?void 0:card._id).then(function(res){if(isOwn){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}}).catch(function(err){console.log('Error',err);});};function handleUpdateUser(data){api.editProfile(data).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log('Error',err);});}function handleUpdateAvatar(data){api.updateAvatar(data).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log('Error',err);});}function handleAddPlaceSubmit(_ref){var name=_ref.name,link=_ref.link;api.addCard({name:name,link:link}).then(function(res){var newCard=res;setCards([newCard].concat(_toConsumableArray(cards)));;closeAllPopups();}).catch(function(err){console.log('Error',err);});}var cbLogin=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2){var email,password,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=_ref2.email,password=_ref2.password;_context.prev=1;setLoading(true);_context.next=5;return auth.authorize({email:email,password:password});case 5:data=_context.sent;if(data){_context.next=8;break;}throw new Error('Неверное имя или пароль пользователя');case 8:if(data.token){console.log(data.token);localStorage.setItem('jwt',data.token);setLoggedIn(true);setUserData(data);}return _context.abrupt(\"return\",data);case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);setMessage(_context.t0.message);setIsTooltipPopupOpen(true);case 16:_context.prev=16;setLoading(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,12,16,19]]);}));return function(_x){return _ref3.apply(this,arguments);};}(),[]);var cbRegister=useCallback(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);_context2.next=4;return auth.register(email,password);case 4:data=_context2.sent;if(data){_context2.next=7;break;}throw new Error('Пользователь не зарегистрирован');case 7:if(data){cbLogin(email,password);setIsTooltipPopupOpen(true);}return _context2.abrupt(\"return\",data);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);setMessage(_context2.t0.error);setIsTooltipPopupOpen(true);case 15:_context2.prev=15;setLoading(false);return _context2.finish(15);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11,15,18]]);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}(),[]);var cbLogout=function cbLogout(){setLoggedIn(false);localStorage.clear();setUserData(null);};var tokenCheck=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var token,user;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setLoading(true);token=localStorage.getItem('jwt');// console.log(token);\nif(token){_context3.next=5;break;}throw new Error('no token');case 5:_context3.next=7;return auth.checkToken(token);case 7:user=_context3.sent;if(user){_context3.next=10;break;}throw new Error('invalid user');case 10:if(user){setLoggedIn(true);setUserData(user);setEmail(user.email);//user.data.email\n}_context3.next=15;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);case 15:_context3.prev=15;setLoading(false);return _context3.finish(15);case 18:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13,15,18]]);})),[loggedIn]);useEffect(function(){tokenCheck();},[tokenCheck]);useEffect(function(){loggedIn&&api.getUser(currentUser).then(function(res){setCurrentUser(res);}).catch(function(err){console.log('Error',err);});},[loggedIn]);useEffect(function(){loggedIn&&api.getInitialCards().then(function(res){return setCards(res);}).catch(function(err){console.log('Error',err);});},[loggedIn]);if(loading){return'...Loading';}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{loggedIn:loggedIn,onLogout:cbLogout,email:email}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(ProtectedRoute,{exact:true,path:\"/\",loggedIn:loggedIn,userData:userData,component:Main,cards:cards,onEditProfile:function onEditProfile(){return setIsEditProfilePopupOpen(true);},onAddPlace:function onAddPlace(){return setIsAddPlacePopupOpen(true);},onEditAvatar:function onEditAvatar(){return setIsEditAvatarPopupOpen(true);},onCardClick:function onCardClick(data){return setselectedCard(data);},onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(Login,{loggedIn:loggedIn,onLogin:cbLogin,onTooltip:function onTooltip(){return setIsTooltipPopupOpen(true);}})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(Register,{loggedIn:loggedIn,onRegister:cbRegister,onTooltip:function onTooltip(){return setIsTooltipPopupOpen(true);}})})]}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"*\",children:loggedIn?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Redirect,{to:\"/signin\"})}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(InfoTooltip,{active:isTooltipPopupOpen,onClose:closeAllPopups,loggedIn:loggedIn,message:loggedIn?\"Вы успешно зарегистрировались!\":message}),/*#__PURE__*/_jsx(EditProfilePopup,{active:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{active:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{active:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(PopupWithForm,{buttonText:\"\\u0414\\u0430\",name:\"delete\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\"}),/*#__PURE__*/_jsx(ImagePopup,{item:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"names":["Header","Main","Footer","PopupWithForm","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ImagePopup","Login","Register","InfoTooltip","auth","api","useEffect","useState","useCallback","CurrentUserContext","Route","Redirect","Switch","ProtectedRoute","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setselectedCard","currentUser","setCurrentUser","cards","setCards","loggedIn","setLoggedIn","loading","setLoading","userData","setUserData","email","setEmail","isTooltipPopupOpen","setIsTooltipPopupOpen","message","setMessage","closeAllPopups","handleCardLike","card","console","log","likes","isLiked","some","id","_id","handleLike","then","res","state","map","c","catch","err","handleCardDelete","isOwn","owner","removeCard","filter","handleUpdateUser","data","editProfile","handleUpdateAvatar","updateAvatar","handleAddPlaceSubmit","name","link","addCard","newCard","cbLogin","password","authorize","Error","token","localStorage","setItem","cbRegister","register","error","cbLogout","clear","tokenCheck","getItem","checkToken","user","getUser","getInitialCards"],"sources":["C:/Users/elvir/dev/react-mesto-api-full/frontend/src/components/App.js"],"sourcesContent":["import Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport InfoTooltip from './InfoTooltip.js';\r\nimport * as auth from '../utils/Auth.js';\r\nimport api from '../utils/Api';\r\nimport { useEffect, useState, useCallback } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { Route, Redirect, Switch } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute.js';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [selectedCard, setselectedCard] = useState(null)\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [cards, setCards] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [userData, setUserData] = useState(null);\r\n  const [email, setEmail] = useState(null);\r\n  const [isTooltipPopupOpen, setIsTooltipPopupOpen] = useState(false);\r\n  const [message, setMessage] = useState(null)\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setselectedCard(null);\r\n    setIsTooltipPopupOpen(false)\r\n  }\r\n\r\n  const handleCardLike = (card) => {\r\n    console.log(card.likes);\r\n    const isLiked = card.likes.some(id => id === currentUser._id);\r\n    api.handleLike(card?._id, isLiked)\r\n      .then((res) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? res : c));\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error', err);\r\n      })\r\n  }\r\n\r\n  const handleCardDelete = (card) => {\r\n    const isOwn = card?.owner === currentUser._id;\r\n    api.removeCard(card?._id)\r\n      .then((res) => {\r\n        if (isOwn) {\r\n          setCards((state) => state.filter((c) => c._id !== card._id));\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error', err);\r\n      })\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.editProfile(data)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups()\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error', err);\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(data) {\r\n    api.updateAvatar(data)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups()\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error', err);\r\n      })\r\n  }\r\n\r\n  function handleAddPlaceSubmit({ name, link }) {\r\n    api.addCard({\r\n      name: name,\r\n      link: link\r\n    })\r\n      .then((res) => {\r\n        const newCard = res;\r\n        setCards([newCard, ...cards]);;\r\n        closeAllPopups()\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error', err);\r\n      })\r\n  }\r\n\r\n  const cbLogin = useCallback(async ({ email, password }) => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await auth.authorize({ email, password });\r\n      if (!data) {\r\n        throw new Error('Неверное имя или пароль пользователя');\r\n      }\r\n      if (data.token) {\r\n        console.log(data.token);\r\n        localStorage.setItem('jwt', data.token);\r\n        setLoggedIn(true);\r\n        setUserData(data);\r\n      }\r\n      return data;\r\n    } catch (err) {\r\n      setMessage(err.message);\r\n      setIsTooltipPopupOpen(true);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [])\r\n\r\n  const cbRegister = useCallback(async (email, password) => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await auth.register(email, password);\r\n      if (!data) {\r\n        throw new Error('Пользователь не зарегистрирован');\r\n      }\r\n      if (data) {\r\n        cbLogin(email, password);\r\n        setIsTooltipPopupOpen(true);\r\n      }\r\n      return data;\r\n    } catch (res) {\r\n      setMessage(res.error);\r\n      setIsTooltipPopupOpen(true);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [])\r\n\r\n  const cbLogout = (() => {\r\n    setLoggedIn(false);\r\n    localStorage.clear();\r\n    setUserData(null);\r\n  })\r\n\r\n  const tokenCheck = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      let token = localStorage.getItem('jwt');\r\n      // console.log(token);\r\n      if (!token) {\r\n        throw new Error('no token')\r\n      }\r\n      const user = await auth.checkToken(token);\r\n      if (!user) {\r\n        throw new Error('invalid user')\r\n      }\r\n      if (user) {\r\n        setLoggedIn(true);\r\n        setUserData(user);\r\n        setEmail(user.email); //user.data.email\r\n      }\r\n    } catch (err) {\r\n      // console.log(err);\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    tokenCheck()\r\n  }, [tokenCheck]);\r\n\r\n  useEffect(() => {\r\n    loggedIn &&\r\n      api.getUser(currentUser)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n        })\r\n        .catch((err) => {\r\n          console.log('Error', err);\r\n        })\r\n  }, [loggedIn])\r\n\r\n  useEffect(() => {\r\n    loggedIn &&\r\n      api.getInitialCards()\r\n        .then((res) => {\r\n          return setCards(res);\r\n        })\r\n        .catch((err) => {\r\n          console.log('Error', err);\r\n        })\r\n  }, [loggedIn])\r\n\r\n  if (loading) {\r\n    return '...Loading'\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header loggedIn={loggedIn}\r\n          onLogout={cbLogout}\r\n          email={email} />\r\n        <Switch>\r\n          <ProtectedRoute exact path=\"/\"\r\n            loggedIn={loggedIn}\r\n            userData={userData}\r\n            component={Main}\r\n            cards={cards}\r\n            onEditProfile={() => setIsEditProfilePopupOpen(true)}\r\n            onAddPlace={() => setIsAddPlacePopupOpen(true)}\r\n            onEditAvatar={() => setIsEditAvatarPopupOpen(true)}\r\n            onCardClick={(data) => setselectedCard(data)}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          >\r\n          </ProtectedRoute>\r\n          <Route path=\"/signin\">\r\n            <Login loggedIn={loggedIn}\r\n              onLogin={cbLogin}\r\n              onTooltip={() => setIsTooltipPopupOpen(true)}\r\n            />\r\n          </Route>\r\n          <Route path=\"/signup\">\r\n            <Register loggedIn={loggedIn}\r\n              onRegister={cbRegister}\r\n              onTooltip={() => setIsTooltipPopupOpen(true)}\r\n            />\r\n          </Route>\r\n        </Switch>\r\n        <Route exact path=\"*\" >\r\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\r\n        </Route>\r\n        <Footer />\r\n        <InfoTooltip\r\n          active={isTooltipPopupOpen}\r\n          onClose={closeAllPopups}\r\n          loggedIn={loggedIn}\r\n          message={loggedIn ? \"Вы успешно зарегистрировались!\" : message} />\r\n        <EditProfilePopup\r\n          active={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}>\r\n        </EditProfilePopup>\r\n        <AddPlacePopup\r\n          active={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}>\r\n        </AddPlacePopup>\r\n        <EditAvatarPopup\r\n          active={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        >\r\n        </EditAvatarPopup>\r\n        <PopupWithForm\r\n          buttonText='Да'\r\n          name=\"delete\"\r\n          title=\"Вы уверены?\" />\r\n        <ImagePopup\r\n          item={selectedCard}\r\n          onClose={closeAllPopups} />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}